# Quantum Picture Book サービス要件定義書

## 1. サービス概要
子供の名前の由来をストーリーの中心に据えた、新しい形のパーソナライズ絵本制作サービス。量子アニーリングとAIを活用し、質の高い絵本を数分で生成します。

## 2. 背景
- パーソナライズ絵本市場の現状
  - 既存サービスは名前の文字を物語に組み込む表面的なカスタマイズに留まる
  - 名前に込められた本当の物語が活かされていない
  - 家族の想いを伝える機会が限られている

## 3. 目的
- 名前に込められた想いを次世代に伝える
  - 親から子への想いをストーリー化
  - 名前を付けた際のエピソードの視覚化
- 日本の文化要素を活かした独自の世界観の構築
  - ひらがなベースのストーリー展開
  - 日本的な象徴やモチーフの活用

## 4. 拡張要件

### 4.1 日本語化対応
- ひらがなベースのストーリー展開
  - スペルからひらがなへの変更
  - 各ひらがなに対応する動物・キャラクターの設定
  - 日本的な場所・シーンでのメッセージ伝達

- 日本的要素の導入
  - 導き手としての以下のキャラクター：
    - 干支（12種）
    - 自然現象（太陽、月、虹、星）
    - 気象要素（雲、雨、雪、風）
    - 日本の象徴的な植物（桜、竹、菊、ひまわり、梅、モミジ）

### 4.2 ストーリー構造の拡張
- 名前の文字別ストーリー
  - 各文字につき2ページ程度の展開
  - 導き手キャラクターによるメッセージ
  - 場所と関連付けたシーン展開

- 名前の由来ストーリー
  - 親ユーザーによる入力内容の反映
  - 起承転結による4部構成
  - 複数のストーリーパターンからの選択制
  - 前半の導き手キャラクターの再登場

## 5. 機能要件

### 5.1 ユーザー入力機能
- 基本情報入力
  - 子供の名前（ひらがなであるということが新規）
  - 性別
  - 生年月日
  - アバター選択

- 名前の由来情報入力
  - 由来のストーリー
  - 込められた願い
  - 特別なエピソード

- カスタマイズ選択
  - ストーリーパターン選択（起承転結各パートで複数のオプション）
  - 登場キャラクターの好み設定
  - 背景シーンの選択

### 5.2 ユーザー操作手順
- 基本情報の入力
  - お子様の名前（ひらがな）
  - 性別
  - 生年月日
  - アバター選択（お好みの見た目）

- 名前の由来情報入力
  - ストーリー入力画面で以下を記入
    - 名前の由来（なぜその名前を選んだか）
    - 込められた願い
    - 名付けに関する思い出やエピソード(あれば)
  
  - 入力のポイント
    - 具体的なエピソードを含める
    - 感情や想いを言葉で表現
    - 家族の歴史や願いを盛り込む

- カスタマイズ設定
  - ストーリーの好み選択
    - 好きな日本の伝統要素（桜、紅葉など）
    - 好きな動物や自然現象
    - 季節の希望（特定の季節にまつわる思い出など）

### 5.3 コンテンツ生成機能
- ストーリー(絵本の文字)の生成
  - 量子アニーリングによる最適なストーリー構造の決定
  - AIを活用した自然な文章生成
  - 名前の由来の物語化と感情表現の最適化
  - 選択されたパターンに基づく展開

- 絵の生成
  - AIによる高品質なイラスト生成
  - テキストとビジュアルの調和

## 6. 量子アニーリング活用システム

### 6.1 既に決定している要素
- キャラクター定義
  - 各キャラクターの性格特性
  - メッセージ例
  - ひらがなとキャラクターの対応関係

- ストーリー構造
  - 動物などの導き手と名前の構成ひらがなに応じてメッセージが伝えられるパート(各ひらがなに対して2個の登場人物)
  - 名前の由来に応じたエピソード

### 6.2 量子アニーリングによる最適化要素
- ストーリー構造の最適化
  - 目的関数：
    ```
    最大化 F = w2*Σ(キャラクター相性) + w3*Σ(ドラマ性)
    ```
  
  - 最適化パラメータ：
    - キャラクター相性スコア（キャラクター間の関係性）
    - センテンスの統一性または分離性 (ユーザーがいろんなメッセージを伝えたいのか、層じゃないのか)
    - ドラマ性スコア（起承転結の展開強度）

- キャラクター配置の最適化
  - 目的関数：
    ```
    最大化 G = α1*Σ(文字相性) + α3*Σ(メッセージ整合性)
    ```
  
  - 最適化パラメータ：
    - 文字相性（ひらがなとキャラクターの対応度）
    - 季節調和度（選択されたキャラクターの季節感の一貫性）
    - メッセージ整合性（キャラクターのメッセージと全体のテーマとの調和）

  - 制約条件：
    - 各文字には1つのキャラクターのみ割り当て
    - 同じキャラクターの過度な重複を防ぐ
    - 季節の連続性を維持
